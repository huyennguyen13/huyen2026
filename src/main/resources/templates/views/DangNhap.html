<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity6">

<head>
<title>Title</title>
<!-- Required meta tags -->
<meta charset="utf-8" />
<meta name="viewport"
	content="width=device-width, initial-scale=1, shrink-to-fit=no" />

<!-- Bootstrap CSS v5.2.1 -->
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
	rel="stylesheet"
	integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
	crossorigin="anonymous" />

<link rel="stylesheet" th:href="@{/css/Login.css}" />
<link rel="stylesheet" th:href="@{/css/style-error.css}" />
<script
	src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/js/all.min.js"
	integrity="sha512-naukR7I+Nk6gp7p5TMA4ycgfxaZBJ7MO5iC3Fp6ySQyKFHOGfpkSZkYVWV5R7u7cfAicxanwYQ5D1e17EfJcMA=="
	crossorigin="anonymous" referrerpolicy="no-referrer"></script>
	<style type="text/css">
	.error {
    color: red;
    font-size: 12px;
    margin-top: 5px;
}
	</style>
</head>

<body>
	<div class="container" id="container">
		<div class="form-container register-container">
			<form th:action="@{/process-signup}" method="post"
				th:object="${taiKhoan}">
				<h1>Đăng ký</h1>
				<input type="hidden" th:fiels="taiKhoanId">
				<div class="form-control">
					<input type="text" id="Username" placeholder="Họ và tên"
						name="hoTen" th:field="*{hoTen}" required/> 
						<small id="username-error"></small>
						<span></span>
                       
				</div>
				<div class="form-control">
					<input type="email" id="email" placeholder="Email" name="email"
						th:field="*{email}" value="${taiKhoan.email}" required/> 
						<small id="email-error"></small>
						<span></span>
						 <p th:if="${#fields.hasErrors('email')}" th:errors="*{email}" style="color: red;"></p>
				</div>
				<div class="form-control">
					<input type="password" id="Password" placeholder="Password"
						name="matKhau" th:field="*{matKhau}" required/> 
						<small id="password-error"></small>
						<span></span>
				</div>
				<button type="submit" value="submit">Đăng ký</button>
				<span>Đăng ký với</span>
				<div class="social-container">
					<a th:href="@{/oauth2/authorization/google}" class="social"><i
						class="fa-brands fa-google"></i></a>
					<!--        <a href="#" class="social"><i class="fa-brands fa-tiktok"></i></a> -->
				</div>
			</form>
		</div>

		<div class="form-container login-container">
			<form class="form-lg" th:action="@{/views/DangNhap/submit}"
				th:object="${taiKhoan}" method="post">
				
				<h1>Đăng nhập</h1>
				<div class="form-control2">
					<input type="email" class="email-2" placeholder="Email" id="email"
						name="email" th:field="*{email}" required  value="${email != null ? email : ''}"/> 
						<small class="email-error-2"></small>
						<span></span>
						<small class="email-error-2 text-danger" th:if="${emailError != null}" th:text="${emailError}"></small>
<!-- 						 <c:if test="${not empty emailError}"> -->
<!--             <small class="text-danger">[[${emailError}]]</small> -->
<!--         </c:if> -->
						 
				</div>
				<div class="form-control2">
					<input type="password" class="password-2" placeholder="Password"
						id="password" name="matKhau" th:field="*{matKhau}" required/> 
						<small class="password-error-2"></small>
						<span></span>
						<small class="password-error-2 text-danger" th:if="${passwordError != null}" th:text="${passwordError}"></small>
<!-- 						  <c:if test="${not empty passwordError}"> -->
<!--             <small class="text-danger">[[${passwordError}]]</small> -->
<!--         </c:if> -->
				</div>

				<div class="content">
					<div class="checkbox">
						<input type="checkbox" name="remember" id="checkbox" /> <label
						>Ghi nhớ tôi</label>
					</div>
					<div class="pass-link">
						<a th:href="@{/views/QuenMK}">Quên mật khẩu?</a>
					</div>
				</div>
				<button type="submit" value="submit" id="loginButton">Đăng Nhập</button>
				<span>Đăng nhập với</span>
				<div class="social-container">
					<a th:href="@{/oauth2/authorization/google}" class="social"><i
						class="fa-brands fa-google"></i></a>
				</div>
			</form>
		</div>

		<div class="overlay-container">
			<div class="overlay">
				<div class="overlay-panel overlay-left">
					<h1 class="title">Bạn đã đăng ký rồi đúng không!</h1>
					<p>Thì bạn hãy đăng nhập nhé!</p>
					<button class="ghost" id="login">
						Đăng nhập <i class="fa-solid fa-arrow-left"></i>
					</button>
				</div>

				<div class="overlay-panel overlay-right">
					<h1 class="title">Chào bạn!</h1>
					<p>Nếu bạn chưa có tài khoản thì hãy đăng ký nhé!</p>
					<button class="ghost" id="register">
						Đăng ký <i class="fa-solid fa-arrow-right"></i>
					</button>
				</div>
			</div>
		</div>
		<div id="notification" th:if="${successMessage}" class="notification">
			<div class="notification-header">
				<i class="icon">ℹ️</i> <span class="notification-title">Thông
					báo</span>
				<button class="close-btn" onclick="closeNotification()">✖</button>
			</div>
			<div class="notification-body">
				<p th:text="${successMessage}"></p>
			</div>
		</div>
		<div id="notification" th:if="${error}" class="notification">
			<div class="notification-header">
				<i class="icon">ℹ️</i> <span class="notification-title">Thông
					báo</span>
				<button class="close-btn" onclick="closeNotification()">✖</button>
			</div>
			<div class="notification-body">
				<p th:text="${error}"></p>
			</div>
		</div>
	</div>
	<script>
        function closeNotification() {
            const notification = document.getElementById("notification");
            notification.style.display = "none";
        }
        // Tự động ẩn thông báo sau 5 giây
        setTimeout(() => {
            const notification = document.getElementById("notification");
            if (notification) {
                notification.style.display = "none";
            }
        }, 3000);
    </script>
	<script
		src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
		integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
		crossorigin="anonymous"></script>

	<script
		src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js"
		integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+"
		crossorigin="anonymous"></script>
	<script src="../../../js/Login.js"></script>
</body>
</html>