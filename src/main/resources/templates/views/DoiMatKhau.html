<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity6">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Cài đặt thông báo</title>
<!-- ===== Boxicons CSS ===== -->
<link href="https://unpkg.com/boxicons@2.1.1/css/boxicons.min.css"
	rel="stylesheet" />
<!-- Linking Google Font Link For Icons -->
<link rel="preconnect" href="https://fonts.googleapis.com" />
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
<link
	href="https://fonts.googleapis.com/css2?family=Nunito+Sans:ital,opsz,wght@0,6..12,200..1000;1,6..12,200..1000&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
	rel="stylesheet" />
<link rel="stylesheet" th:href="@{/css/style-profile.css}" />
<link rel="stylesheet" th:href="@{/css/style-error.css}" />
<!-- Bootstrap CSS v5.2.1 -->
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
	rel="stylesheet"
	integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
	crossorigin="anonymous" />
<script
	src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/js/all.min.js"
	integrity="sha512-naukR7I+Nk6gp7p5TMA4ycgfxaZBJ7MO5iC3Fp6ySQyKFHOGfpkSZkYVWV5R7u7cfAicxanwYQ5D1e17EfJcMA=="
	crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script type="text/javascript"
	src="https://www.gstatic.com/charts/loader.js"></script>
<style>
/* Đưa form vào giữa màn hình */
.form-container {
  position: absolute; /* Vị trí tuyệt đối để căn chỉnh */
  top: 50%; /* Căn chỉnh giữa theo chiều dọc */
  left: 50%; /* Căn chỉnh giữa theo chiều ngang */
  transform: translate(-50%, -50%); /* Đẩy ngược để form thực sự ở giữa */
  width: 400px; /* Đặt chiều rộng cho form */
  background-color: white; /* Nền trắng để dễ nhìn */
  border-radius: 8px; /* Bo tròn các góc */
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); /* Tạo hiệu ứng đổ bóng */
  padding: 20px; /* Khoảng cách bên trong form */
}

/* Tùy chỉnh nút */
.button {
  background-image: linear-gradient(90deg, #fda64a, #ed6336);
  color: white;
  border: none;
  width: 100%;
  height: 40px;
  border-radius: 20px;
  font-size: 16px;
  margin-top: 10px;
  cursor: pointer;
}

.button:hover {
  opacity: 0.9;
}

</style>
</head>

<body>
	<div class="main-content" style="height: 100%">
		<nav>
			<div class="nav-bar">
				<div class="darkLight-searchBox">
					<div class="info">
						<div class="box-weather m-2">
							<img class="m-0" id="weather-icon" src="" alt="Weather Icon"
								style="display: none" />
						</div>
						<div class="clock" id="time">00:00:00</div>
						<div class="date" id="date">Day, DD/MM/YYYY</div>
					</div>
					<div class="dark-light" id="reloadButton">
						<i class="bx bx-moon moon"></i> <i class="bx bx-sun sun"></i>
					</div>
					<div class="searchBox">
						<div class="searchToggle">
							<i class="bx bx-x cancel"></i> <i class="bx bx-search search"></i>
						</div>
						<div class="search-field">
							<input type="text" placeholder="Bạn muốn tìm gì?" /> <i
								class="bx bx-search"></i>
						</div>
					</div>
				</div>
			</div>
		</nav>
		<div class="box-work">
			<div class="title">
				<h1>
					<span class="edit_text-title">Đổi mật khẩu</span>
				</h1>
			</div>
			<div class="form-container">
				<form id="notification-form" class="container"
					th:object="${doiMatKhau}" th:action="@{/changePassword/update}"
					method="post">
					<div class="form-group mb-4">
						<label>Mật khẩu cũ</label> <input class="form-control"
							type="password" th:field="*{matKhauCu}" />
					</div>
					<div class="form-group mb-4">
						<label>Mật khẩu mới</label> <input class="form-control"
							type="password" th:field="*{matKhauMoi}" />
					</div>
					<div class="form-group mb-4">
						<label>Xác nhận mật khẩu mới</label> <input class="form-control"
							type="password" th:field="*{xacNhanMk}" />
					</div>
					<div class="d-flex justify-content-center">
						<button class="button">Lưu</button>
					</div>
				</form>
			</div>

			<div id="notification" th:if="${message}" class="notification"
				style="width: 400px; border-radius: none;" >
				<div class="notification-header" style="background-color: #fff;">
					<i class="fa-solid fa-circle-check text-success"></i> <span class="notification-title">Thông
						báo</span>
					<button class="close-btn" onclick="closeNotification()">✖</button>
				</div>
				<div class="notification-body">
					<p th:text="${message}"></p>
				</div>
			</div>
			<div id="notification" th:if="${error}" class="notification"
				style="width: 400px; border-radius: none;">
				<div class="notification-header" style="background-color: #fff;">
					<i class="fa-solid fa-triangle-exclamation text-danger"></i> <span class="notification-title">Thông
						báo</span>
					<button class="close-btn" onclick="closeNotification()">✖</button>
				</div>
				<div class="notification-body">
					<p th:text="${error}"></p>
				</div>
			</div>
		</div>
	</div>

	<script>
      function saveSetting(name, value) {
        localStorage.setItem(name, value);
      }

      function loadSettings() {
        const orderUpdates = localStorage.getItem("order-updates") === "true";
        const promotions = localStorage.getItem("promotions") === "true";
        const messages = localStorage.getItem("messages") === "true";
        const promotionssms = localStorage.getItem("promotionssms") === "true";
        const messagessms = localStorage.getItem("messagessms") === "true";

        document.querySelector('input[name="order-updates"]').checked =
          orderUpdates;
        document.querySelector('input[name="promotions"]').checked = promotions;
        document.querySelector('input[name="messages"]').checked = messages;
        document.querySelector('input[name="promotionssms"]').checked =
          promotionssms;
        document.querySelector('input[name="messagessms"]').checked =
          messagessms;
      }

      loadSettings();

      document.querySelectorAll(".toggle input").forEach((toggle) => {
        toggle.addEventListener("change", function () {
          saveSetting(this.name, this.checked);

          // Hiển thị thông báo thành công
          const successNotification = document.getElementById(
            "successNotification"
          );
          successNotification.classList.add("show");

          // Ẩn thông báo sau 2 giây
          setTimeout(() => {
            successNotification.classList.remove("show");
          }, 2000);
        });
      });
      function closeNotification() {
          const notification = document.getElementById("notification");
          notification.style.display = "none";
      }
      // Tự động ẩn thông báo sau 5 giây
      setTimeout(() => {
          const notification = document.getElementById("notification");
          if (notification) {
              notification.style.display = "none";
          }
      }, 3000);
    </script>

	<script src="../../../js/reload.js"></script>
	<script src="../../../js/chart.js"></script>
	<script src="../../../js/page.js"></script>
	<script src="../../../js/app.js"></script>
	<script
		src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
		integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
		crossorigin="anonymous"></script>
	<script
		src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js"
		integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+"
		crossorigin="anonymous"></script>
</body>
</html>
